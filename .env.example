# Permahub Environment Configuration
# Copy this file to .env and fill in your actual values
# IMPORTANT: Never commit .env file to version control!

# ==============================================================================
# SUPABASE CONFIGURATION
# ==============================================================================

# Choose which Supabase instance to use:
# - Set to "false" for local development (requires `supabase start`)
# - Set to "true" for cloud/production deployment
# - Leave unset to auto-detect based on hostname
VITE_USE_CLOUD_DB=false

# Cloud Supabase Configuration (for production deployment)
# Get these from: https://supabase.com/dashboard/project/_/settings/api
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here

# Local Supabase Configuration (auto-configured by Supabase CLI)
# These values are set when you run `supabase start`
# Default local values:
#   URL: http://127.0.0.1:3000
#   Anon Key: Generated by Supabase CLI

# ==============================================================================
# DATABASE CONFIGURATION (Local Development)
# ==============================================================================

# PostgreSQL credentials for local Supabase instance
# Used by Docker Compose and Supabase CLI
POSTGRES_PASSWORD=your-super-secret-password-change-this

# JWT Secret for token signing (used by GoTrue auth service)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-here-generate-with-openssl

# ==============================================================================
# AUTHENTICATION CONFIGURATION
# ==============================================================================

# Your application URL (where your frontend is hosted)
# Local development: http://localhost:3001 (or your dev server port)
# Production: https://yourdomain.com
SITE_URL=http://localhost:3001/src/wiki/wiki-home.html

# Additional redirect URLs for OAuth callbacks and email confirmations
# Comma-separated list for production deployments
ADDITIONAL_REDIRECT_URLS=http://localhost:3001/src/wiki/wiki-home.html,http://localhost:3001/src/wiki/wiki-reset-password.html

# Supabase public URL (where your Supabase API is accessible)
# Local: http://localhost:8000 (Kong API Gateway)
# Production: https://your-project.supabase.co
SUPABASE_PUBLIC_URL=http://localhost:8000

# Service role key (NEVER expose in frontend!)
# Only use this in backend scripts or migrations
# Get from: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_SERVICE_KEY=your-service-role-key-here-keep-secret

# ==============================================================================
# EMAIL / SMTP CONFIGURATION
# ==============================================================================

# SMTP settings for sending emails (auth confirmations, password resets, etc.)
# For local development, use Mailpit (see docker-compose.yml)
#   Host: host.docker.internal (or localhost outside Docker)
#   Port: 1025
#   Web UI: http://localhost:8025

# SMTP Host (e.g., smtp.gmail.com, smtp.sendgrid.net, host.docker.internal)
SMTP_HOST=host.docker.internal

# SMTP Port (usually 587 for TLS, 465 for SSL, 1025 for Mailpit)
SMTP_PORT=1025

# SMTP Username (leave empty for Mailpit or no-auth SMTP)
SMTP_USER=

# SMTP Password (leave empty for Mailpit or no-auth SMTP)
SMTP_PASS=

# Email address used as sender
SMTP_SENDER_NAME=Permahub Community
SMTP_ADMIN_EMAIL=noreply@permahub.local

# ==============================================================================
# REALTIME CONFIGURATION
# ==============================================================================

# Secret key base for Realtime server
# Generate with: openssl rand -base64 32
REALTIME_SECRET_KEY_BASE=your-realtime-secret-key-base-here

# ==============================================================================
# STORAGE CONFIGURATION
# ==============================================================================

# Maximum file upload size in bytes (default: 50MB)
FILE_SIZE_LIMIT=52428800

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Environment (development, staging, production)
NODE_ENV=development

# Base path for deployments (leave empty for root deployment)
# Set to /Permahub for GitHub Pages: https://username.github.io/Permahub/
VITE_BASE=/

# ==============================================================================
# DEVELOPMENT TOOLS
# ==============================================================================

# Enable verbose logging for debugging
DEBUG=false

# Show detailed i18n translation logs
I18N_DEBUG=false

# ==============================================================================
# PRODUCTION SECURITY (Set these in production!)
# ==============================================================================

# Content Security Policy (CSP) nonce for inline scripts
# Generate a new random value for each request
# CSP_NONCE=randomly-generated-value

# Enable strict CSP headers
ENABLE_CSP=true

# ==============================================================================
# NOTES
# ==============================================================================

# 1. LOCAL DEVELOPMENT SETUP:
#    - Copy this file to .env: cp .env.example .env
#    - Set VITE_USE_CLOUD_DB=false
#    - Start Mailpit: docker-compose up -d
#    - Start Supabase: supabase start
#    - Start dev server: npm run dev
#    - Access Mailpit UI: http://localhost:8025
#
# 2. PRODUCTION DEPLOYMENT:
#    - Set VITE_USE_CLOUD_DB=true
#    - Configure VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY
#    - Set up real SMTP credentials (Gmail, SendGrid, etc.)
#    - Never commit .env file to version control!
#    - Use environment variables in your hosting platform
#
# 3. SECURITY:
#    - SUPABASE_ANON_KEY: Safe to expose in frontend (public key)
#    - SUPABASE_SERVICE_KEY: NEVER expose in frontend! Backend only!
#    - JWT_SECRET: Keep secret, used for token signing
#    - POSTGRES_PASSWORD: Keep secret
#
# 4. GENERATING SECRETS:
#    - JWT_SECRET: openssl rand -base64 32
#    - POSTGRES_PASSWORD: openssl rand -base64 32
#    - REALTIME_SECRET_KEY_BASE: openssl rand -base64 32
